generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions", "jsonProtocol"]
}

datasource db {
  provider          = "postgresql"
  url               = env("POSTGRES_PRISMA_URL")
  directUrl         = env("POSTGRES_URL_NON_POOLING")
  shadowDatabaseUrl = env("POSTGRES_URL_NON_POOLING")
  extensions        = [postgis, timescaledb]
}

model buildings {
  name       String                                 @id
  geom       Unsupported("geometry(Polygon, 4326)")
  properties Json
  metrics    metrics[]                              @ignore
}

/// This table has subclasses and requires additional setup for migrations. Visit https://pris.ly/d/table-inheritance for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by the Prisma Client.
model metrics {
  building_name            String
  dt                       DateTime
  cooling                  Float
  total_operational_energy Float
  lighting                 Float
  domestic_hot_water       Float
  equipment                Float
  window_radiation         Float
  heating                  Float

  buildings buildings @relation(fields: [building_name], references: [name])

  @@id([building_name, dt])
  @@index([dt(sort: Desc)])
}

model spatial_ref_sys {
  srid      Int     @id
  auth_name String? @db.VarChar(256)
  auth_srid Int?
  srtext    String? @db.VarChar(2048)
  proj4text String? @db.VarChar(2048)
}

model users {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  image     String
  createdAt DateTime @default(now())
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions", "jsonProtocol"]
}

datasource db {
  provider          = "postgresql"
  url               = env("POSTGRES_PRISMA_URL")
  directUrl         = env("POSTGRES_URL_NON_POOLING")
  shadowDatabaseUrl = env("POSTGRES_URL_NON_POOLING")
  extensions        = [postgis]
}

model buildings {
  name       String                                      @id
  geom       Unsupported("geometry(Polygon, 4326)")
  properties Json
  metrics    metrics[]                                   @ignore
}

/// This table has subclasses and requires additional setup for migrations. Visit https://pris.ly/d/table-inheritance for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by the Prisma Client.
model metrics {
  building_name String
  metric        String
  value         Float
  dt            DateTime
  buildings     buildings @relation(fields: [building_name], references: [name])

  @@index([dt(sort: Desc)])
  @@ignore
}

model spatial_ref_sys {
  srid      Int     @id
  auth_name String? @db.VarChar(256)
  auth_srid Int?
  srtext    String? @db.VarChar(2048)
  proj4text String? @db.VarChar(2048)
}

model users {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  image     String
  createdAt DateTime @default(now())
}
